{% extends "admin/base.html" %}

{% block title %}{{ event.title }} - Stride Admin{% endblock %}

{% block content %}
<div class="page-header">
    <div>
        <h1>{{ event.title }}</h1>
        <p class="subtitle">
            {{ event.event_type | replace('_', ' ') | title }}
            {% if event.distance_category %} &middot; {{ event.distance_category }}{% endif %}
            &middot; {{ registration_count }} registrations
        </p>
    </div>
    <div class="header-actions">
        <a href="/admin/events/{{ event.id }}/edit" class="btn btn-primary">Edit</a>
        <a href="/admin/events" class="btn btn-outline">Back</a>
    </div>
</div>

{% if event.banner_image_url %}
<div class="event-banner">
    <img src="{{ event.banner_image_url }}" alt="{{ event.title }}">
</div>
{% endif %}

<div class="detail-grid">
    <div class="detail-card">
        <h4>Schedule</h4>
        <p><strong>Starts:</strong> {{ event.starts_at.strftime('%b %d, %Y at %H:%M UTC') }}</p>
        <p><strong>Ends:</strong> {{ event.ends_at.strftime('%b %d, %Y at %H:%M UTC') }}</p>
        {% if event.registration_opens_at %}
        <p><strong>Reg. Opens:</strong> {{ event.registration_opens_at.strftime('%b %d, %Y at %H:%M UTC') }}</p>
        {% endif %}
        {% if event.registration_closes_at %}
        <p><strong>Reg. Closes:</strong> {{ event.registration_closes_at.strftime('%b %d, %Y at %H:%M UTC') }}</p>
        {% endif %}
    </div>
    <div class="detail-card">
        <h4>Branding</h4>
        {% if event.sponsor_name %}<p><strong>Sponsor:</strong> {{ event.sponsor_name }}</p>{% endif %}
        {% if event.sponsor_logo_url %}
        <img src="{{ event.sponsor_logo_url }}" alt="Logo" style="max-height: 60px; margin-top: 8px;">
        {% endif %}
        <div class="color-swatches">
            {% if event.primary_color %}
            <span class="swatch" style="background: {{ event.primary_color }}"></span>
            <span class="text-muted">{{ event.primary_color }}</span>
            {% endif %}
            {% if event.accent_color %}
            <span class="swatch" style="background: {{ event.accent_color }}"></span>
            <span class="text-muted">{{ event.accent_color }}</span>
            {% endif %}
        </div>
    </div>
</div>

<div class="tab-bar">
    <button class="tab active"
            hx-get="/admin/events/{{ event.id }}/registrations"
            hx-target="#tab-content"
            hx-swap="innerHTML">
        Registrations
    </button>
    <button class="tab"
            hx-get="/admin/events/{{ event.id }}/leaderboard"
            hx-target="#tab-content"
            hx-swap="innerHTML">
        Leaderboard
    </button>
</div>

<div id="tab-content"
     hx-get="/admin/events/{{ event.id }}/registrations"
     hx-trigger="load"
     hx-swap="innerHTML">
    <div class="loading">Loading...</div>
</div>
{% endblock %}
